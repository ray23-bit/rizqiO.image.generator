<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cah KENTHIR AI</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #1f1c2c, #928dab);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem;
    }
    h1 {
      margin-bottom: 1rem;
      text-align: center;
    }
    .container {
      background: rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      padding: 2rem;
      max-width: 700px;
      width: 100%;
      backdrop-filter: blur(10px);
    }
    textarea, select, button {
      width: 100%;
      margin: 0.5rem 0;
      padding: 0.75rem;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
    }
    button {
      background-color: #4caf50;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #45a049;
    }
    .image-container {
      margin-top: 1rem;
      width: 100%;
      display: flex;
      justify-content: center;
    }
    #output {
      display: none;
      border-radius: 12px;
      max-width: 100%;
      object-fit: contain;
    }
    .download-btn {
      background-color: #2196f3;
      margin-top: 1rem;
      display: none;
      text-align: center;
      padding: 0.75rem;
      border-radius: 8px;
      text-decoration: none;
      color: white;
    }
    .aspect-select {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    .aspect-select button {
      flex: 1;
      background: #333;
      font-size: 0.9rem;
    }
    .row {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }
    #loader {
      display: none;
      text-align: center;
      margin-top: 1rem;
    }
    .loader-spinner {
      border: 5px solid rgba(255, 255, 255, 0.3);
      border-top: 5px solid #fff;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: auto;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <h1>Cah KENTHIR AI v2</h1>
  <div class="container">
    <textarea id="prompt" placeholder="Tulis deskripsi gambar..."></textarea>

    <div class="row">
      <select id="style">
        <option value="">-- Pilih Gaya Seni --</option>
      </select>
      <select id="effect">
        <option value="">-- Pilih Efek Visual --</option>
      </select>
    </div>

    <div class="aspect-select">
      <button onclick="setAspect('1024x1024')">1:1</button>
      <button onclick="setAspect('1792x1024')">16:9</button>
      <button onclick="setAspect('1024x1792')">9:16</button>
    </div>

    <button onclick="generateImage()">Generate Image</button>
    <button onclick="resetAll()" style="background:#f44336;">Reset</button>

    <div id="loader">
      <div class="loader-spinner"></div>
      <p>Generating your image...</p>
    </div>

    <div class="image-container">
      <img id="output" src="" />
    </div>

    <a id="downloadLink" class="download-btn" download="generated-image.png">Download Image</a>
  </div>

  <script>
    const styleOptions = [
      "cyberpunk", "fantasy", "pixel art", "steampunk", "vaporwave", "realism", "gothic", "watercolor", "anime", "sketch",
      "low poly", "3D render", "concept art", "line art", "retro", "digital painting", "surrealism", "futuristic", "dark art", "dreamy",
      "baroque", "minimalist", "expressionism", "noir", "art nouveau", "vintage", "oil painting", "synthwave", "cartoon", "mystical"
    ];

    const effectOptions = [
      "glow", "cinematic lighting", "neon light", "soft focus", "dramatic shadows", "motion blur", "bokeh", "depth of field", "grainy", "dream-like",
      "pastel filter", "dark ambiance", "hazy", "color pop", "vignette", "lens flare", "ambient light", "rim light", "vibrant", "eerie"
    ];

    const styleSelect = document.getElementById("style");
    const effectSelect = document.getElementById("effect");

    styleOptions.forEach(style => {
      const opt = document.createElement("option");
      opt.value = style;
      opt.textContent = style.charAt(0).toUpperCase() + style.slice(1);
      styleSelect.appendChild(opt);
    });

    effectOptions.forEach(effect => {
      const opt = document.createElement("option");
      opt.value = effect;
      opt.textContent = effect.charAt(0).toUpperCase() + effect.slice(1);
      effectSelect.appendChild(opt);
    });

    let selectedAspect = '1024x1024';

    function setAspect(size) {
      selectedAspect = size;
    }

    function resetAll() {
      document.getElementById('prompt').value = '';
      document.getElementById('output').style.display = 'none';
      document.getElementById('downloadLink').style.display = 'none';
      document.getElementById('loader').style.display = 'none';
    }

    async function generateImage() {
      const prompt = document.getElementById('prompt').value.trim();
      const style = document.getElementById('style').value;
      const effect = document.getElementById('effect').value;

      if (!prompt) return alert("Masukkan deskripsi gambar!");

      document.getElementById('loader').style.display = 'block';
      document.getElementById('output').style.display = 'none';
      document.getElementById('downloadLink').style.display = 'none';

      const finalPrompt = encodeURIComponent(`${prompt}, ${style}, ${effect}`);
      const imgUrl = `https://image.pollinations.ai/prompt/${finalPrompt}?size=${selectedAspect}&watermark=false`;

      const output = document.getElementById('output');
      output.src = imgUrl;

      output.onload = () => {
        document.getElementById('loader').style.display = 'none';
        output.style.display = 'block';

        const downloadLink = document.getElementById('downloadLink');
        downloadLink.href = imgUrl;
        downloadLink.style.display = 'inline-block';
      };
    }
  </script>
</body>
</html>
